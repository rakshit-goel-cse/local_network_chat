{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rakshit Work\\\\Desktop\\\\workspace\\\\local_network_chat\\\\local_chat\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport ChatBox from \"./chatBox\";\nimport AddMsg from \"./addMessage\";\nimport axios from \"axios\";\nimport Login from \"./login/login\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [userName, setUserNam] = React.useState(\"\");\n  //  const bc= new BroadcastChannel(\"chatBoox\");\n  //  bc.addEventListener(\"message\", e=>{\n  //    setChatData([...chatData,e.data]);\n  //    console.log(\"msg from broad- \"+e);\n  //  })\n\n  //set username from cookies\n  useEffect(() => {\n    console.log(\"setuserloc\");\n    localStorage.setItem(\"user\", JSON.stringify(userName));\n  }, [userName]);\n  const logout = async () => {\n    localStorage.removeItem(\"user\");\n    setUserNam(\"\");\n    try {\n      await axios.post(\"http://192.168.29.231:8000/logout\", {\n        user: userName\n      });\n    } catch (e) {\n      console.log(\"error in front end axios\" + e);\n    }\n  };\n  if (userName === null || userName === \"\") {\n    const tempUser = JSON.parse(localStorage.getItem(\"user\"));\n    //console.log(\"tempData- \",tempUser)\n    if (tempUser && tempUser.length > 1) {\n      setUserNam(tempUser);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Login, {\n        setUser: setUserNam\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 14\n      }, this);\n    }\n  } else {\n    //get data from backend every second\n    let chatD;\n    return /*#__PURE__*/_jsxDEV(MainLaunch, {\n      userName: userName,\n      logout: logout,\n      chatD: chatD\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }, this);\n  }\n}\n_s(App, \"dNaf82GkY28pT7jXK/QSWtDUKGc=\");\n_c = App;\nfunction MainLaunch(_ref) {\n  _s2();\n  let {\n    userName,\n    logout,\n    chatD\n  } = _ref;\n  const [chatData, setChatData] = React.useState([chatD]);\n  chatD = chatData;\n  React.useEffect(() => {\n    axios.get(\"http://192.168.29.231:8000/data\").then(response => {\n      console.log(\"axios.get on launch\", chatData.length, response.data.length);\n      if (chatData.length != response.data.length) {\n        setChatData(response.data);\n      }\n    });\n  }, setInterval(() => {\n    axios.get(\"http://192.168.29.231:8000/data\").then(response => {\n      //console.log(\"axios.get in interval\",chatData.length,response.data.length)\n      if (chatData.length != response.data.length) {\n        console.log(\"axios.get in interval inside\", chatData, response.data);\n        setChatData(response.data);\n        console.log(\"axios.get in interval inside 2 \", chatData);\n      }\n    });\n  }, 1000));\n\n  //set data at backend when adding text\n  const addChat = async msg => {\n    console.log(\"msg- \" + msg);\n    try {\n      await axios.post(\"http://192.168.29.231:8000/\", {\n        user: userName,\n        msg: msg\n      }).then(response => {\n        console.log(\"axios.get\", response.data);\n        setChatData(response.data);\n      });\n    } catch (e) {\n      console.log(\"error in front end axios while adding chat\" + e);\n    }\n  };\n\n  //delete data at backend\n  const deleteChat = async id => {\n    console.log(\"id- \" + id);\n    try {\n      await axios.post(\"http://192.168.29.231:8000/delete\", {\n        id: id\n      }).then(response => {\n        console.log(\"axios.get\", response.data);\n        setChatData(response.data);\n      });\n    } catch (e) {\n      console.log(\"error in front end axios while deleting\" + e);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container row left grey lighten-4\",\n    children: [/*#__PURE__*/_jsxDEV(_Fragment, {\n      children: console.log(\"call main\")\n    }, void 0, false), /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \" orange teal-text text-darken-2 \",\n      children: [userName, /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \" waves-effect btn-small right red white-text\",\n        onClick: logout,\n        children: \"LogOut\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChatBox, {\n      chatData: chatData,\n      userName: userName,\n      deleteChat: deleteChat\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddMsg, {\n      addChat: addChat\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n}\n_s2(MainLaunch, \"pIgoWYBJwT186Wc3iBi4bQ8xTzs=\");\n_c2 = MainLaunch;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"MainLaunch\");","map":{"version":3,"names":["React","useEffect","ChatBox","AddMsg","axios","Login","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","userName","setUserNam","useState","console","log","localStorage","setItem","JSON","stringify","logout","removeItem","post","user","e","tempUser","parse","getItem","length","setUser","fileName","_jsxFileName","lineNumber","columnNumber","chatD","MainLaunch","_c","_ref","_s2","chatData","setChatData","get","then","response","data","setInterval","addChat","msg","deleteChat","id","className","children","onClick","_c2","$RefreshReg$"],"sources":["C:/Users/Rakshit Work/Desktop/workspace/local_network_chat/local_chat/src/App.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport ChatBox from \"./chatBox\";\nimport AddMsg from \"./addMessage\";\nimport axios from \"axios\";\nimport Login from \"./login/login\";\n\nfunction App() {\n  \n  const [userName, setUserNam] = React.useState(\"\");\n  //  const bc= new BroadcastChannel(\"chatBoox\");\n  //  bc.addEventListener(\"message\", e=>{\n  //    setChatData([...chatData,e.data]);\n  //    console.log(\"msg from broad- \"+e);\n  //  })\n\n  //set username from cookies\n  useEffect(() => {\n    console.log(\"setuserloc\");\n    localStorage.setItem(\"user\", JSON.stringify(userName));\n  }, [userName]);\n\n  const logout = async() => {\n    localStorage.removeItem(\"user\");\n    setUserNam(\"\");\n    try {\n      await axios\n        .post(\"http://192.168.29.231:8000/logout\", {\n          user: userName\n        });\n    } catch (e) {\n      console.log(\"error in front end axios\" + e);\n    }\n    \n  };\n\n  \n\n  if (userName === null || userName === \"\") {\n    const tempUser = JSON.parse(localStorage.getItem(\"user\"));\n    //console.log(\"tempData- \",tempUser)\n    if (tempUser && tempUser.length > 1) {\n      setUserNam(tempUser);\n    } else {\n      return <Login setUser={setUserNam} />;\n    }\n  } else {\n    //get data from backend every second\n    let chatD;\n    return(\n    <MainLaunch userName={userName} logout={logout} chatD={chatD}/>\n    )\n  }\n}\n\nfunction MainLaunch({userName,logout,chatD}){\n  const [chatData, setChatData] = React.useState([chatD]);\n  chatD=chatData;\n  React.useEffect(() => {\n    axios.get(\"http://192.168.29.231:8000/data\").then((response) => {\n         console.log(\"axios.get on launch\",chatData.length,response.data.length)\n      if(chatData.length!=response.data.length){\n        setChatData(response.data);\n      }\n    });\n  }, \n     setInterval(() => {\n      axios.get(\"http://192.168.29.231:8000/data\").then((response) => {\n         //console.log(\"axios.get in interval\",chatData.length,response.data.length)\n      if(chatData.length!=response.data.length){\n        console.log(\"axios.get in interval inside\",chatData,response.data)\n        setChatData(response.data);\n        console.log(\"axios.get in interval inside 2 \",chatData)\n      }\n    });\n    }, 1000)\n  );\n\n  //set data at backend when adding text\n  const addChat = async (msg) => {\n    console.log(\"msg- \" + msg);\n    try {\n      await axios\n        .post(\"http://192.168.29.231:8000/\", {\n          user: userName,\n          msg: msg,\n        })\n        .then((response) => {\n          console.log(\"axios.get\", response.data);\n          setChatData(response.data);\n        });\n    } catch (e) {\n      console.log(\"error in front end axios while adding chat\" + e);\n    }\n  };\n\n   //delete data at backend\n   const deleteChat = async (id) => {\n    console.log(\"id- \" + id);\n    try {\n      await axios\n        .post(\"http://192.168.29.231:8000/delete\", {\n          id:id\n        })\n        .then((response) => {\n          console.log(\"axios.get\", response.data);\n          setChatData(response.data);\n        });\n    } catch (e) {\n      console.log(\"error in front end axios while deleting\" + e);\n    }\n  };\n\n  return (\n    <div className=\"container row left grey lighten-4\">\n      <>{console.log(\"call main\")}</>\n      <h5 className=\" orange teal-text text-darken-2 \">\n        {userName}\n        <label\n          className=\" waves-effect btn-small right red white-text\"\n          onClick={logout}\n        >\n          LogOut\n        </label>\n      </h5>\n      <ChatBox chatData={chatData} userName={userName} deleteChat={deleteChat}/>\n      <AddMsg addChat={addChat} />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,MAAM,MAAM,cAAc;AACjC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAElC,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EAEb,MAAM,CAACC,QAAQ,EAAEC,UAAU,CAAC,GAAGb,KAAK,CAACc,QAAQ,CAAC,EAAE,CAAC;EACjD;EACA;EACA;EACA;EACA;;EAEA;EACAb,SAAS,CAAC,MAAM;IACdc,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;IACzBC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACR,QAAQ,CAAC,CAAC;EACxD,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;EAEd,MAAMS,MAAM,GAAG,MAAAA,CAAA,KAAW;IACxBJ,YAAY,CAACK,UAAU,CAAC,MAAM,CAAC;IAC/BT,UAAU,CAAC,EAAE,CAAC;IACd,IAAI;MACF,MAAMT,KAAK,CACRmB,IAAI,CAAC,mCAAmC,EAAE;QACzCC,IAAI,EAAEZ;MACR,CAAC,CAAC;IACN,CAAC,CAAC,OAAOa,CAAC,EAAE;MACVV,OAAO,CAACC,GAAG,CAAC,0BAA0B,GAAGS,CAAC,CAAC;IAC7C;EAEF,CAAC;EAID,IAAIb,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,EAAE,EAAE;IACxC,MAAMc,QAAQ,GAAGP,IAAI,CAACQ,KAAK,CAACV,YAAY,CAACW,OAAO,CAAC,MAAM,CAAC,CAAC;IACzD;IACA,IAAIF,QAAQ,IAAIA,QAAQ,CAACG,MAAM,GAAG,CAAC,EAAE;MACnChB,UAAU,CAACa,QAAQ,CAAC;IACtB,CAAC,MAAM;MACL,oBAAOnB,OAAA,CAACF,KAAK;QAACyB,OAAO,EAAEjB;MAAW;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IACvC;EACF,CAAC,MAAM;IACL;IACA,IAAIC,KAAK;IACT,oBACA5B,OAAA,CAAC6B,UAAU;MAACxB,QAAQ,EAAEA,QAAS;MAACS,MAAM,EAAEA,MAAO;MAACc,KAAK,EAAEA;IAAM;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC;EAEjE;AACF;AAACvB,EAAA,CA9CQD,GAAG;AAAA2B,EAAA,GAAH3B,GAAG;AAgDZ,SAAS0B,UAAUA,CAAAE,IAAA,EAAyB;EAAAC,GAAA;EAAA,IAAxB;IAAC3B,QAAQ;IAACS,MAAM;IAACc;EAAK,CAAC,GAAAG,IAAA;EACzC,MAAM,CAACE,QAAQ,EAAEC,WAAW,CAAC,GAAGzC,KAAK,CAACc,QAAQ,CAAC,CAACqB,KAAK,CAAC,CAAC;EACvDA,KAAK,GAACK,QAAQ;EACdxC,KAAK,CAACC,SAAS,CAAC,MAAM;IACpBG,KAAK,CAACsC,GAAG,CAAC,iCAAiC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAK;MAC3D7B,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAACwB,QAAQ,CAACX,MAAM,EAACe,QAAQ,CAACC,IAAI,CAAChB,MAAM,CAAC;MAC1E,IAAGW,QAAQ,CAACX,MAAM,IAAEe,QAAQ,CAACC,IAAI,CAAChB,MAAM,EAAC;QACvCY,WAAW,CAACG,QAAQ,CAACC,IAAI,CAAC;MAC5B;IACF,CAAC,CAAC;EACJ,CAAC,EACEC,WAAW,CAAC,MAAM;IACjB1C,KAAK,CAACsC,GAAG,CAAC,iCAAiC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAK;MAC7D;MACH,IAAGJ,QAAQ,CAACX,MAAM,IAAEe,QAAQ,CAACC,IAAI,CAAChB,MAAM,EAAC;QACvCd,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAACwB,QAAQ,EAACI,QAAQ,CAACC,IAAI,CAAC;QAClEJ,WAAW,CAACG,QAAQ,CAACC,IAAI,CAAC;QAC1B9B,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAACwB,QAAQ,CAAC;MACzD;IACF,CAAC,CAAC;EACF,CAAC,EAAE,IAAI,CACT,CAAC;;EAED;EACA,MAAMO,OAAO,GAAG,MAAOC,GAAG,IAAK;IAC7BjC,OAAO,CAACC,GAAG,CAAC,OAAO,GAAGgC,GAAG,CAAC;IAC1B,IAAI;MACF,MAAM5C,KAAK,CACRmB,IAAI,CAAC,6BAA6B,EAAE;QACnCC,IAAI,EAAEZ,QAAQ;QACdoC,GAAG,EAAEA;MACP,CAAC,CAAC,CACDL,IAAI,CAAEC,QAAQ,IAAK;QAClB7B,OAAO,CAACC,GAAG,CAAC,WAAW,EAAE4B,QAAQ,CAACC,IAAI,CAAC;QACvCJ,WAAW,CAACG,QAAQ,CAACC,IAAI,CAAC;MAC5B,CAAC,CAAC;IACN,CAAC,CAAC,OAAOpB,CAAC,EAAE;MACVV,OAAO,CAACC,GAAG,CAAC,4CAA4C,GAAGS,CAAC,CAAC;IAC/D;EACF,CAAC;;EAEA;EACA,MAAMwB,UAAU,GAAG,MAAOC,EAAE,IAAK;IAChCnC,OAAO,CAACC,GAAG,CAAC,MAAM,GAAGkC,EAAE,CAAC;IACxB,IAAI;MACF,MAAM9C,KAAK,CACRmB,IAAI,CAAC,mCAAmC,EAAE;QACzC2B,EAAE,EAACA;MACL,CAAC,CAAC,CACDP,IAAI,CAAEC,QAAQ,IAAK;QAClB7B,OAAO,CAACC,GAAG,CAAC,WAAW,EAAE4B,QAAQ,CAACC,IAAI,CAAC;QACvCJ,WAAW,CAACG,QAAQ,CAACC,IAAI,CAAC;MAC5B,CAAC,CAAC;IACN,CAAC,CAAC,OAAOpB,CAAC,EAAE;MACVV,OAAO,CAACC,GAAG,CAAC,yCAAyC,GAAGS,CAAC,CAAC;IAC5D;EACF,CAAC;EAED,oBACElB,OAAA;IAAK4C,SAAS,EAAC,mCAAmC;IAAAC,QAAA,gBAChD7C,OAAA,CAAAE,SAAA;MAAA2C,QAAA,EAAGrC,OAAO,CAACC,GAAG,CAAC,WAAW;IAAC,gBAAG,CAAC,eAC/BT,OAAA;MAAI4C,SAAS,EAAC,kCAAkC;MAAAC,QAAA,GAC7CxC,QAAQ,eACTL,OAAA;QACE4C,SAAS,EAAC,8CAA8C;QACxDE,OAAO,EAAEhC,MAAO;QAAA+B,QAAA,EACjB;MAED;QAAArB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eACL3B,OAAA,CAACL,OAAO;MAACsC,QAAQ,EAAEA,QAAS;MAAC5B,QAAQ,EAAEA,QAAS;MAACqC,UAAU,EAAEA;IAAW;MAAAlB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,eAC1E3B,OAAA,CAACJ,MAAM;MAAC4C,OAAO,EAAEA;IAAQ;MAAAhB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACzB,CAAC;AAEV;AAACK,GAAA,CA1EQH,UAAU;AAAAkB,GAAA,GAAVlB,UAAU;AA4EnB,eAAe1B,GAAG;AAAC,IAAA2B,EAAA,EAAAiB,GAAA;AAAAC,YAAA,CAAAlB,EAAA;AAAAkB,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}